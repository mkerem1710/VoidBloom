<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="utf-8">
<title>VoidBloom</title>
<style>
  body{margin:0;overflow:hidden;background:#000}
  canvas{display:block}
  #ui{position:fixed;bottom:18px;right:18px;z-index:10}
  #gear{cursor:pointer;opacity:0.45;transition:.3s}
  #gear:hover{opacity:1;transform:scale(1.25) rotate(30deg)}
  #panel{position:absolute;bottom:64px;right:0;width:280px;background:rgba(10,10,20,0.96);
          backdrop-filter:blur(14px);border:1px solid #333;border-radius:14px;padding:16px;
          box-shadow:0 20px 50px rgba(0,0,0,0.7);transform:scale(0);transform-origin:bottom right;
          transition:transform .32s cubic-bezier(0.2,0.8,0.4,1)}
  #panel.open{transform:scale(1)}
  label{display:block;margin:14px 0 6px;color:#ccc;font:13px system-ui}
  input[type=range]{width:100%;accent-color:#fff3}
</style>
</head>
<body>
<canvas id="c"></canvas>
<div id="ui">
  <svg id="gear" width="44" height="44" viewBox="0 0 100 100">
    <circle cx="50" cy="50" r="44" fill="none" stroke="#aaa" stroke-width="8"/>
    <path d="M50 10 L50 32 M50 68 L50 90 M10 50 L32 50 M68 50 L90 50 
         M27 27 L38 38 M62 62 L73 73 M27 73 L38 62 M62 27 L73 38" 
         stroke="#aaa" stroke-width="10" stroke-linecap="round"/>
    <circle cx="50" cy="50" r="16" fill="#000"/>
  </svg>
  <div id="panel">
    <label>Tohum Büyüklüğü <span id="sz">14</span></label>
    <input type="range" min="6" max="38" value="14" id="size">
    <label>Tohum Sıklığı <span id="fq">Normal</span></label>
    <input type="range" min="4" max="80" value="22" id="freq">
  </div>
</div>
<script>
const palettes=[278,175,28,58,315,105,200,340,85,255,15,295];
let baseHue=palettes[Math.floor(Math.random()*palettes.length)];
function bg(){const b=4+3*Math.sin(Date.now()*6e-6);const r=(8+b)+14*Math.cos(baseHue*Math.PI/180);const g=(8+b)+14*Math.cos((baseHue+120)*Math.PI/180);const bb=(8+b)+14*Math.cos((baseHue+240)*Math.PI/180);document.body.style.background=`rgb(${r|0},${g|0},${bb|0})`}bg();
const c=document.getElementById('c'),ctx=c.getContext('2d');
let w=c.width=innerWidth,h=c.height=innerHeight;
const buf=ctx.createImageData(w,h),d=buf.data;
const gs=4;let cols=Math.ceil(w/gs),rows=Math.ceil(h/gs);
let grid=new Float32Array(cols*rows),next=new Float32Array(cols*rows);
grid.fill(0);
let t=0,s=false,r=14,m=22;
addEventListener('resize',()=>{w=c.width=innerWidth;h=c.height=innerHeight;cols=Math.ceil(w/gs);rows=Math.ceil(h/gs)});
function seed(x,y){const cx=Math.floor(x/gs),cy=Math.floor(y/gs);if(cx<5||cx>=cols-5||cy<5||cy>=rows-5)return;for(let dy=-r;dy<=r;dy++)for(let dx=-r;dx<=r;dx++)if(dx*dx+dy*dy<=r*r){const nx=cx+dx,ny=cy+dy;if(nx>=0&&nx<cols&&ny>=0&&ny<rows)grid[ny*cols+nx]=Math.max(grid[ny*cols+nx],1-Math.hypot(dx,dy)/(r+6))}}
let lx=-999,ly=-999;
addEventListener('pointermove',e=>{const x=e.clientX,y=e.clientY;if(Math.hypot(x-lx,y-ly)>m){seed(x,y);lx=x;ly=y;s=true}});
addEventListener('pointerdown',e=>{seed(e.clientX,e.clientY);s=true});
function step(){for(let y=1;y<rows-1;y++)for(let x=1;x<cols-1;x++){const i=y*cols+x,v=grid[i];let lap=v*-1;lap+=grid[(y-1)*cols+x]*0.2+grid[(y+1)*cols+x]*0.2+grid[y*cols+x-1]*0.2+grid[y*cols+x+1]*0.2;lap+=grid[(y-1)*cols+x-1]*0.05+grid[(y-1)*cols+x+1]*0.05+grid[(y+1)*cols+x-1]*0.05+grid[(y+1)*cols+x+1]*0.05;const f=0.055*(1+Math.sin(t*1e-4)*0.01);const k=0.062*(1+Math.cos(t*9e-5)*0.008);const ch=0.21*lap-v*v*(1-v)+f*(1-v)-k*v;next[i]=Math.max(0,Math.min(1,v+ch*0.04))}[grid,next]=[next,grid]}
function draw(){t++;bg();if(s||t>300)step();for(let y=0;y<rows;y++)for(let x=0;x<cols;x++){const v=grid[y*cols+x];const hue=(t*0.0008+v*140+baseHue)%360;const sat=82+v*18;const light=9+v*62;const rr=Math.floor(light+(255-light)*Math.cos(hue*Math.PI/180)*sat/100);const g=Math.floor(light+(255-light)*Math.cos((hue+120)*Math.PI/180)*sat/100);const bb=Math.floor(light+(255-light)*Math.cos((hue+240)*Math.PI/180)*sat/100);const px=x*gs,py=y*gs;for(let j=0;j<gs;j++)for(let i=0;i<gs;i++){const p=((py+j)*w+px+i)*4;d[p]=rr;d[p+1]=g;d[p+2]=bb;d[p+3]=255}}ctx.putImageData(buf,0,0);requestAnimationFrame(draw)}draw();
document.getElementById('gear').onclick=e=>{e.stopPropagation();document.getElementById('panel').classList.toggle('open')};
document.addEventListener('click',()=>document.getElementById('panel').classList.remove('open'));
document.getElementById('panel').addEventListener('click',e=>e.stopPropagation());
document.getElementById('size').oninput=e=>{r=+e.target.value;document.getElementById('sz').textContent=r};
document.getElementById('freq').oninput=e=>{m=+e.target.value;document.getElementById('fq').textContent=m<15?'Çok Sık':m<40?'Normal':'Az'};
</script>
</body>
</html>
